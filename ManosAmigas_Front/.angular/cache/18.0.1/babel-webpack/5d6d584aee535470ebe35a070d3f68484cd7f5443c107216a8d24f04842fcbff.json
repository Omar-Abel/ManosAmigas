{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NavbarComponent } from '../navbar/navbar.component';\nimport { CommonModule } from '@angular/common';\nlet CreateActivitiesComponent = class CreateActivitiesComponent {\n  constructor(fb, activityService, router) {\n    this.fb = fb;\n    this.activityService = activityService;\n    this.router = router;\n    this.image = null;\n    this.showToast = false;\n    this.activityForm = this.fb.group({\n      title: ['', Validators.required],\n      category: ['', Validators.required],\n      benefits: ['', Validators.required],\n      location: ['', Validators.required],\n      meetingPoint: ['', Validators.required],\n      peopleRequired: [0, [Validators.required, Validators.min(1)]],\n      startDate: ['', Validators.required],\n      endDate: ['', Validators.required],\n      image: ['', Validators.required],\n      description: ['', Validators.required]\n    });\n  }\n  ShowImage(event) {\n    const file = event.target.files[0];\n    this.image = file;\n  }\n  onSubmit() {\n    if (this.activityForm.valid) {\n      const formData = new FormData();\n      formData.append('title', this.activityForm.value.title);\n      formData.append('description', this.activityForm.value.description);\n      formData.append('category', this.activityForm.value.category);\n      formData.append('location', this.activityForm.value.location);\n      formData.append('meetingPoint', this.activityForm.value.meetingPoint);\n      formData.append('peopleRequired', this.activityForm.value.peopleRequired.toString());\n      formData.append('benefits', this.activityForm.value.benefits);\n      formData.append('startDate', this.activityForm.value.startDate);\n      formData.append('endDate', this.activityForm.value.endDate);\n      if (this.image) {\n        formData.append('image', this.image);\n      }\n      const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');\n      if (currentUser && currentUser.id) {\n        formData.append('hostId', currentUser.id.toString());\n      }\n      this.activityService.addActivity(formData).subscribe({\n        next: response => {\n          if (response.success === 1) {\n            console.log('Actividad creada con éxito!');\n            this.showToast = true;\n            setTimeout(() => {\n              this.router.navigate(['/']);\n            }, 3000);\n          } else {\n            console.error('Error al crear actividad');\n          }\n        },\n        error: error => {\n          console.error('Error al enviar la actividad', error);\n        }\n      });\n    } else {\n      console.log('Formulario inválido');\n    }\n  }\n  onFileChange(event) {\n    const file = event.target.files[0];\n    this.image = file;\n  }\n};\nCreateActivitiesComponent = __decorate([Component({\n  selector: 'app-create-activities',\n  standalone: true,\n  templateUrl: './create-activities.component.html',\n  styleUrls: ['./create-activities.component.css'],\n  imports: [RouterModule, NavbarComponent, CommonModule, ReactiveFormsModule, RouterModule]\n})], CreateActivitiesComponent);\nexport { CreateActivitiesComponent };","map":{"version":3,"names":["Component","ReactiveFormsModule","Validators","RouterModule","NavbarComponent","CommonModule","CreateActivitiesComponent","constructor","fb","activityService","router","image","showToast","activityForm","group","title","required","category","benefits","location","meetingPoint","peopleRequired","min","startDate","endDate","description","ShowImage","event","file","target","files","onSubmit","valid","formData","FormData","append","value","toString","currentUser","JSON","parse","localStorage","getItem","id","addActivity","subscribe","next","response","success","console","log","setTimeout","navigate","error","onFileChange","__decorate","selector","standalone","templateUrl","styleUrls","imports"],"sources":["C:\\Users\\Omar Lora\\Desktop\\Proyecto Final\\ManosAmigas\\ManosAmigas_Front\\src\\app\\create-activities\\create-activities.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { RouterModule, Router } from '@angular/router';\r\nimport { NavbarComponent } from '../navbar/navbar.component';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ActivityService } from '../../services/activity.service'; \r\n\r\n\r\n@Component({\r\n  selector: 'app-create-activities',\r\n  standalone: true,\r\n  templateUrl: './create-activities.component.html',\r\n  styleUrls: ['./create-activities.component.css'],\r\n  imports: [RouterModule, NavbarComponent, CommonModule, ReactiveFormsModule, RouterModule]\r\n})\r\nexport class CreateActivitiesComponent {\r\n  activityForm: FormGroup;\r\n  image: File | null = null;\r\n  showToast: boolean = false;\r\n  \r\n\r\n  constructor(private fb: FormBuilder, private activityService: ActivityService, private router: Router) {\r\n    this.activityForm = this.fb.group({\r\n      title: ['', Validators.required],\r\n      category: ['', Validators.required],\r\n      benefits: ['', Validators.required],\r\n      location: ['', Validators.required],\r\n      meetingPoint: ['', Validators.required],\r\n      peopleRequired: [0, [Validators.required, Validators.min(1)]],\r\n      startDate: ['', Validators.required],\r\n      endDate: ['', Validators.required],\r\n      image: [ '', Validators.required],\r\n      description: ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  ShowImage(event: any) {\r\n    const file = (event.target as HTMLInputElement).files![0];\r\n    this.image = file;\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.activityForm.valid) {\r\n      const formData = new FormData();\r\n      \r\n      formData.append('title', this.activityForm.value.title);\r\n      formData.append('description', this.activityForm.value.description);\r\n      formData.append('category', this.activityForm.value.category);\r\n      formData.append('location', this.activityForm.value.location);\r\n      formData.append('meetingPoint', this.activityForm.value.meetingPoint);\r\n      formData.append('peopleRequired', this.activityForm.value.peopleRequired.toString());\r\n      formData.append('benefits', this.activityForm.value.benefits);\r\n      formData.append('startDate', this.activityForm.value.startDate);\r\n      formData.append('endDate', this.activityForm.value.endDate);\r\n      if (this.image){\r\n      formData.append('image', this.image);\r\n      }\r\n      const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');\r\n      if (currentUser && currentUser.id) {\r\n        formData.append('hostId', currentUser.id.toString());\r\n      }\r\n\r\n      this.activityService.addActivity(formData).subscribe({\r\n        next: (response) => {\r\n          if (response.success === 1) {\r\n\r\n            console.log('Actividad creada con éxito!');\r\n            this.showToast = true;\r\n            setTimeout(() => {\r\n              this.router.navigate(['/']);\r\n            }, 3000);\r\n\r\n\r\n          } else {\r\n            console.error('Error al crear actividad');\r\n          }\r\n        },\r\n        error: (error) => {\r\n          console.error('Error al enviar la actividad', error);\r\n        }\r\n      });\r\n    } else {\r\n      console.log('Formulario inválido');\r\n    }\r\n  }\r\n\r\n  onFileChange(event: any) {\r\n    const file = event.target.files[0];\r\n    this.image = file; \r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}